/*
 * To change this license header, choose License Headers in Project Properties.
 * To change this template file, choose Tools | Templates
 * and open the template in the editor.
 */
package userinterface.SystemAdminWorkArea;

import Business.DeliveryMan.DeliveryMan;
import Business.EcoSystem;
import Business.Employee.Employee;
import Business.Role.DeliverManRole;
import Business.UserAccount.UserAccount;
import java.awt.CardLayout;
import java.awt.Component;
import java.util.ArrayList;
import java.util.Vector;
import javax.swing.JOptionPane;
import javax.swing.JPanel;
import javax.swing.table.DefaultTableModel;

/**
 *
 * @author snehalchavan
 */
public class ManageDeliveryMan extends javax.swing.JPanel {

    /**
     * Creates new form ManageDeliveryMan
     */
    EcoSystem system;
    JPanel userProcessContainer;
    DefaultTableModel model;
    public ManageDeliveryMan(JPanel userProcessContainer, EcoSystem system) {
        initComponents();
        this.system = system;
        this.userProcessContainer = userProcessContainer;
        DeliverManList();
    }

    /**
     * This method is called from within the constructor to initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is always
     * regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">//GEN-BEGIN:initComponents
    private void initComponents() {

        jLabel1 = new javax.swing.JLabel();
        jLabel2 = new javax.swing.JLabel();
        jTextFieldDeliveryManName = new javax.swing.JTextField();
        jButtonCreateDeliverman = new javax.swing.JButton();
        jButton1updateDeliveryman = new javax.swing.JButton();
        jLabel5 = new javax.swing.JLabel();
        jTextFieldDelivermanUsername = new javax.swing.JTextField();
        jLabel6 = new javax.swing.JLabel();
        jPasswordFieldDeliveryman = new javax.swing.JPasswordField();
        jLabel7 = new javax.swing.JLabel();
        jTextFieldDelDeliveryMan = new javax.swing.JTextField();
        jLabel8 = new javax.swing.JLabel();
        jButtonDeletedeliverman = new javax.swing.JButton();
        jButtonBack = new javax.swing.JButton();
        comboDelivermanList = new javax.swing.JComboBox<>();

        setBackground(new java.awt.Color(255, 255, 255));

        jLabel1.setFont(new java.awt.Font("Lucida Grande", 1, 18)); // NOI18N
        jLabel1.setText("Create DeliveryMan");

        jLabel2.setText("Name");

        jTextFieldDeliveryManName.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jTextFieldDeliveryManNameActionPerformed(evt);
            }
        });

        jButtonCreateDeliverman.setBackground(new java.awt.Color(0, 0, 0));
        jButtonCreateDeliverman.setForeground(new java.awt.Color(255, 255, 255));
        jButtonCreateDeliverman.setText("Create");
        jButtonCreateDeliverman.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jButtonCreateDelivermanActionPerformed(evt);
            }
        });

        jButton1updateDeliveryman.setBackground(new java.awt.Color(0, 0, 0));
        jButton1updateDeliveryman.setForeground(new java.awt.Color(255, 255, 255));
        jButton1updateDeliveryman.setText("Update");
        jButton1updateDeliveryman.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jButton1updateDeliverymanActionPerformed(evt);
            }
        });

        jLabel5.setText("Username");

        jTextFieldDelivermanUsername.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jTextFieldDelivermanUsernameActionPerformed(evt);
            }
        });

        jLabel6.setText("Password");

        jPasswordFieldDeliveryman.setText("jPasswordField1");
        jPasswordFieldDeliveryman.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jPasswordFieldDeliverymanActionPerformed(evt);
            }
        });

        jLabel7.setText("Delivery Man Name");

        jLabel8.setFont(new java.awt.Font("Lucida Grande", 1, 18)); // NOI18N
        jLabel8.setText("Delete DeliveryMan");

        jButtonDeletedeliverman.setBackground(new java.awt.Color(0, 0, 0));
        jButtonDeletedeliverman.setForeground(new java.awt.Color(255, 255, 255));
        jButtonDeletedeliverman.setText("Delete");
        jButtonDeletedeliverman.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jButtonDeletedelivermanActionPerformed(evt);
            }
        });

        jButtonBack.setBackground(new java.awt.Color(0, 0, 0));
        jButtonBack.setForeground(new java.awt.Color(255, 255, 255));
        jButtonBack.setText("Back");
        jButtonBack.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jButtonBackActionPerformed(evt);
            }
        });

        comboDelivermanList.addMouseListener(new java.awt.event.MouseAdapter() {
            public void mouseClicked(java.awt.event.MouseEvent evt) {
                comboDelivermanListMouseClicked(evt);
            }
            public void mousePressed(java.awt.event.MouseEvent evt) {
                comboDelivermanListMousePressed(evt);
            }
        });
        comboDelivermanList.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                comboDelivermanListActionPerformed(evt);
            }
        });

        javax.swing.GroupLayout layout = new javax.swing.GroupLayout(this);
        this.setLayout(layout);
        layout.setHorizontalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(layout.createSequentialGroup()
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(layout.createSequentialGroup()
                        .addGap(410, 410, 410)
                        .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING)
                            .addComponent(jButton1updateDeliveryman, javax.swing.GroupLayout.PREFERRED_SIZE, 121, javax.swing.GroupLayout.PREFERRED_SIZE)
                            .addGroup(layout.createSequentialGroup()
                                .addComponent(jLabel2)
                                .addGap(86, 86, 86)
                                .addComponent(jTextFieldDeliveryManName, javax.swing.GroupLayout.PREFERRED_SIZE, 172, javax.swing.GroupLayout.PREFERRED_SIZE))
                            .addGroup(layout.createSequentialGroup()
                                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                                    .addComponent(jLabel5)
                                    .addComponent(jLabel6))
                                .addGap(60, 60, 60)
                                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)
                                    .addComponent(jPasswordFieldDeliveryman)
                                    .addComponent(jTextFieldDelivermanUsername, javax.swing.GroupLayout.DEFAULT_SIZE, 172, Short.MAX_VALUE))))
                        .addGap(104, 104, 104)
                        .addComponent(comboDelivermanList, javax.swing.GroupLayout.PREFERRED_SIZE, 149, javax.swing.GroupLayout.PREFERRED_SIZE))
                    .addGroup(layout.createSequentialGroup()
                        .addGap(400, 400, 400)
                        .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addGroup(layout.createSequentialGroup()
                                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                                    .addComponent(jLabel7)
                                    .addComponent(jButtonDeletedeliverman, javax.swing.GroupLayout.PREFERRED_SIZE, 163, javax.swing.GroupLayout.PREFERRED_SIZE))
                                .addGap(18, 18, 18)
                                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)
                                    .addComponent(jButtonBack, javax.swing.GroupLayout.DEFAULT_SIZE, 173, Short.MAX_VALUE)
                                    .addComponent(jTextFieldDelDeliveryMan)))
                            .addComponent(jButtonCreateDeliverman, javax.swing.GroupLayout.PREFERRED_SIZE, 132, javax.swing.GroupLayout.PREFERRED_SIZE)
                            .addComponent(jLabel1)
                            .addComponent(jLabel8))))
                .addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
        );
        layout.setVerticalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(layout.createSequentialGroup()
                .addGap(32, 32, 32)
                .addComponent(jLabel1)
                .addGap(28, 28, 28)
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(jLabel2)
                    .addComponent(comboDelivermanList, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(jTextFieldDeliveryManName, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addGap(5, 5, 5)
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(jTextFieldDelivermanUsername, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(jLabel5))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(jPasswordFieldDeliveryman, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(jLabel6))
                .addGap(18, 18, 18)
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(jButtonCreateDeliverman)
                    .addComponent(jButton1updateDeliveryman))
                .addGap(99, 99, 99)
                .addComponent(jLabel8)
                .addGap(31, 31, 31)
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(jLabel7)
                    .addComponent(jTextFieldDelDeliveryMan, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(jButtonDeletedeliverman)
                    .addComponent(jButtonBack))
                .addGap(22, 22, 22))
        );
    }// </editor-fold>//GEN-END:initComponents

    private void jButtonCreateDelivermanActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jButtonCreateDelivermanActionPerformed
        // TODO add your handling code here:
        String name = jTextFieldDeliveryManName.getText();
        
        Employee deliverman = system.getEmployeeDirectory().createEmployee(name);
        String username = jTextFieldDelivermanUsername.getText();
        String password = String.valueOf(jPasswordFieldDeliveryman.getPassword());
        system.getDeliveryManDirectory().createDeliveryMan(name);
        UserAccount managerAdmin = system.getUserAccountDirectory().createUserAccount(username, password, deliverman, new DeliverManRole());
        jTextFieldDeliveryManName.setText("");
        jTextFieldDelivermanUsername.setText("");
        jPasswordFieldDeliveryman.setText("");
        comboDelivermanList.addItem(system.getDeliveryManDirectory().getDeliverymanList().get(system.getDeliveryManDirectory().getDeliverymanList().size()-1).getName());
        JOptionPane.showMessageDialog(null, "Delivery Man created.");
    }//GEN-LAST:event_jButtonCreateDelivermanActionPerformed

    private void jButton1updateDeliverymanActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jButton1updateDeliverymanActionPerformed
        // TODO add your handling code here:
        ArrayList<DeliveryMan> deliverymanList = system.getDeliveryManDirectory().getDeliverymanList();
        ArrayList<UserAccount> userAccountList = system.getUserAccountDirectory().getUserAccountList();
        for(int i=0;i<userAccountList.size();i++){
            if(userAccountList.get(i).getEmployee().getName().equals(jTextFieldDeliveryManName.getText())){
                userAccountList.get(i).setPassword(String.valueOf(jPasswordFieldDeliveryman.getPassword()));
                userAccountList.get(i).setUsername(jTextFieldDelivermanUsername.getText());
            }
        }
       
//        DeliverManList();
        jTextFieldDeliveryManName.setText("");
        jTextFieldDelivermanUsername.setText("");
        jPasswordFieldDeliveryman.setText("");
        
        JOptionPane.showMessageDialog(null, "Data updated successfully.");
    }//GEN-LAST:event_jButton1updateDeliverymanActionPerformed

    private void jTextFieldDelivermanUsernameActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jTextFieldDelivermanUsernameActionPerformed
        // TODO add your handling code here:
    }//GEN-LAST:event_jTextFieldDelivermanUsernameActionPerformed

    private void jPasswordFieldDeliverymanActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jPasswordFieldDeliverymanActionPerformed
        // TODO add your handling code here:
    }//GEN-LAST:event_jPasswordFieldDeliverymanActionPerformed

    private void jButtonDeletedelivermanActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jButtonDeletedelivermanActionPerformed
        // TODO add your handling code here:
        String name = jTextFieldDelDeliveryMan.getText();
        ArrayList<DeliveryMan> deliverymanList = system.getDeliveryManDirectory().getDeliverymanList();
        for(int i=0;i<deliverymanList.size();i++){
            if(deliverymanList.get(i).getName().equals(name)){
                deliverymanList.remove(i);
                System.out.println("deliverman..."+deliverymanList.size());
                comboDelivermanList.removeItem(name);
//                DeliverManList();
                break;
            }

        }
        for(int i=0;i<system.getUserAccountDirectory().getUserAccountList().size();i++){
            if(system.getUserAccountDirectory().getUserAccountList().get(i).getEmployee().getName().equals(name)){
                system.getUserAccountDirectory().getUserAccountList().remove(i);
                System.out.println("user account..."+system.getUserAccountDirectory().getUserAccountList().size());

            }
            if(system.getEmployeeDirectory().getEmployeeList().get(i).getName().equals(name)){
                system.getEmployeeDirectory().getEmployeeList().remove(i);
                System.out.println("employee direc..."+system.getEmployeeDirectory().getEmployeeList().size());
            }
        }
        jTextFieldDelDeliveryMan.setText("");
        JOptionPane.showMessageDialog(null, "Delivery Man Deleted.");
    }//GEN-LAST:event_jButtonDeletedelivermanActionPerformed

    private void jButtonBackActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jButtonBackActionPerformed
        // TODO add your handling code here:
        userProcessContainer.remove(this);
        Component[] componentArray = userProcessContainer.getComponents();
        Component component = componentArray[componentArray.length - 1];
        SystemAdminWorkAreaJPanel sysAdminwjp = (SystemAdminWorkAreaJPanel) component;
        sysAdminwjp.populateTree();
        CardLayout layout = (CardLayout) userProcessContainer.getLayout();
        layout.previous(userProcessContainer);
    }//GEN-LAST:event_jButtonBackActionPerformed

    private void comboDelivermanListMouseClicked(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_comboDelivermanListMouseClicked
        // TODO add your handling code here:
        
    }//GEN-LAST:event_comboDelivermanListMouseClicked

    private void comboDelivermanListActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_comboDelivermanListActionPerformed
        // TODO add your handling code here:
        ArrayList<UserAccount> userAccountList = system.getUserAccountDirectory().getUserAccountList();
        String val = comboDelivermanList.getSelectedItem().toString();
        System.out.println("value+++"+val);
        jTextFieldDeliveryManName.setText(val);
        
        for(int i=0;i<userAccountList.size();i++){
            if(userAccountList.get(i).getEmployee().getName().equals(val)){
                jTextFieldDelivermanUsername.setText(userAccountList.get(i).getUsername());
                jPasswordFieldDeliveryman.setText(userAccountList.get(i).getPassword());
                System.out.println("in for loop combo"+userAccountList.get(i).getUsername()+".....");
            }
        }
        
    }//GEN-LAST:event_comboDelivermanListActionPerformed

    private void comboDelivermanListMousePressed(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_comboDelivermanListMousePressed
        // TODO add your handling code here:
    }//GEN-LAST:event_comboDelivermanListMousePressed

    private void jTextFieldDeliveryManNameActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jTextFieldDeliveryManNameActionPerformed
        // TODO add your handling code here:
    }//GEN-LAST:event_jTextFieldDeliveryManNameActionPerformed


    // Variables declaration - do not modify//GEN-BEGIN:variables
    private javax.swing.JComboBox<String> comboDelivermanList;
    private javax.swing.JButton jButton1updateDeliveryman;
    private javax.swing.JButton jButtonBack;
    private javax.swing.JButton jButtonCreateDeliverman;
    private javax.swing.JButton jButtonDeletedeliverman;
    private javax.swing.JLabel jLabel1;
    private javax.swing.JLabel jLabel2;
    private javax.swing.JLabel jLabel5;
    private javax.swing.JLabel jLabel6;
    private javax.swing.JLabel jLabel7;
    private javax.swing.JLabel jLabel8;
    private javax.swing.JPasswordField jPasswordFieldDeliveryman;
    private javax.swing.JTextField jTextFieldDelDeliveryMan;
    private javax.swing.JTextField jTextFieldDelivermanUsername;
    private javax.swing.JTextField jTextFieldDeliveryManName;
    // End of variables declaration//GEN-END:variables

    private void DeliverManList() {
        ArrayList<DeliveryMan> deliverymanList = system.getDeliveryManDirectory().getDeliverymanList();
        for(int i=0;i<deliverymanList.size();i++){
            comboDelivermanList.addItem(deliverymanList.get(i).getName());
        }
    }
}
